<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />

    <title>Issuer</title>

    <link rel="icon" type="image/png" href="/favicon.png" />

    <link rel="stylesheet" href="/global.css" />

    <script defer src="/lib/issuer.js"></script>
    <link rel="stylesheet" href="/lib/issuer.css" />

    <link rel="stylesheet"
      href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/styles/default.min.css">
    <script defer src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@11.4.0/build/highlight.min.js"></script>

  </head>
  <body>
    <aside class='flash'><div class='ribbon'>Alpha</div></aside>
    <main role="main">
      <h1>issuer</h1>

      <p>This is a small javascript library which adds a problem submission form to a website.
      The form uses a <a href="https://pipedream.com/@open-innovations/issue-handler-p_6lCMPKQ">pipedream workflow</a> to handle calling the GitHub issue API. If you wish to use this code for your organisation, you will need to make a copy of this workflow.</p>
      
      <h2>Adding <code>issuer</code> to a website</h2>
      
      <p>To add the form to your website, include the following lines to your <code>html</code> header.</p>
      
      <pre><code class="html">&lt;script defer src=&quot;//cdn.jsdelivr.net/gh/open-innovations/issuer/lib/issuer.js&quot;&gt;&lt;/script&gt;
&lt;link rel=&quot;stylesheet&quot; href=&quot;//cdn.jsdelivr.net/gh/open-innovations/issuer/lib/issuer.css&quot;/&gt;</code></pre>
      
      <p>Initialise the form with the following script</p>
      
      <pre><code class="html">&lt;script&gt;
  // Attach the issue form component passing the required config
  addEventListener('DOMContentLoaded', function () {
    oi.issuer({
      target: __target__,     // Target DOM element
      endpoint: __endpoint__, // Pipedream endpoint URL
      owner: __owner__,       // GitHub person or organisation
      repo: __repo__,         // GitHub repo
    });
  });
&lt;/script&gt;</code></pre>
      
      <p>This will attach the component into the DOM tree at the point specified.</p>
      
      <p>The only part visible by default is the title bar. Click on this to open
      the form.</p>
      
      <h2>Styling</h2>
      
      <p>There is a small amount of default styling provided, but this can be
      overridden.</p>
      
      <p>Colours are set using variables, and the main issue form is nested
      under a div with the <code>issuer</code> class applied.</p>
      
      <pre><code class="css">#issuer-root {
  /* Example formatting for parent */
  position: fixed;
  bottom: 0;
  right: 0;
  border: 1px solid gray;
}
.issuer {
  width: 30em;                  /* Make it fixed width! */
  /* Variable overrides - set at :root in issuer.css */
  --issuer-header-fg: #ddd;     /* foreground colour for title */
  --issuer-header-bg: #333;     /* background colour for title  */
  --issuer-font-size: 0.9rem;   /* font size */
  --issuer-error-colour: #d22;  /* error highlight colour */
}
.issuer .error {
  border: 2px solid var(--issuer-error-colour);
  padding: 0.5em;
}</code></pre>
                 
    </main>
    <aside id="issuer-root"></aside>
    <script>
      // Attach the issue form component passing the required config
      addEventListener('DOMContentLoaded', function () {
        oi.issuer({
          target: document.querySelector('#issuer-root'),
          endpoint: 'https://8098cec81e241af408f7acc6b778cfd4.m.pipedream.net',
          owner: 'open-innovations',
          repo: 'issuer',
        });
        hljs.highlightAll();
      });
    </script>
  </body>
</html>
